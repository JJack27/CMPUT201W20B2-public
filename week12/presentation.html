<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-04-02 Thu 11:32 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CMPUT201W20B2 Week 12</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Abram Hindle" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CMPUT201W20B2 Week 12</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb8f7e40">1. Week12</a>
<ul>
<li><a href="#org3b3ae76">1.1. Copyright Statement</a>
<ul>
<li><a href="#orgcb68c08">1.1.1. License</a></li>
<li><a href="#org6cf6ec6">1.1.2. Hazel Code is licensed under AGPL3.0+</a></li>
</ul>
</li>
<li><a href="#org6f0e2a7">1.2. Alternative version</a></li>
<li><a href="#org6296ce0">1.3. Init ORG-MODE</a>
<ul>
<li><a href="#org7a921e7">1.3.1. Org export</a></li>
<li><a href="#org8c0d0e0">1.3.2. Org Template</a></li>
</ul>
</li>
<li><a href="#org6233cef">1.4. Remember how to compile?</a></li>
<li><a href="#org98e2b72">1.5. Numbers!</a>
<ul>
<li><a href="#org6599483">1.5.1. Binary</a></li>
<li><a href="#org633b006">1.5.2. Octal</a></li>
<li><a href="#org55b77fc">1.5.3. Base10 Review</a></li>
<li><a href="#org60224f4">1.5.4. Hex Review</a></li>
</ul>
</li>
<li><a href="#org0aead2a">1.6. Floating Point Numbers</a>
<ul>
<li><a href="#org97021f5">1.6.1. Resources</a></li>
<li><a href="#org0b8a301">1.6.2. Single precision IEEE754 floating point numbers</a></li>
<li><a href="#org5dd151a">1.6.3. Let's explore the bits of floats</a></li>
<li><a href="#org6d3557f">1.6.4. How do I avoid typepunning?</a></li>
</ul>
</li>
<li><a href="#org00fb701">1.7. Modules</a></li>
<li><a href="#org3573c9a">1.8. Coupling</a>
<ul>
<li><a href="#orge147e27">1.8.1. Coupling</a></li>
<li><a href="#org4273518">1.8.2. Graph Coupling</a></li>
</ul>
</li>
<li><a href="#org5d42a70">1.9. Cohesion</a>
<ul>
<li><a href="#orgb222758">1.9.1. McCabe's Cyclometic Complexity</a></li>
<li><a href="#orga0f69a0">1.9.2. Refs</a></li>
</ul>
</li>
<li><a href="#org538a79d">1.10. Big Programs</a>
<ul>
<li><a href="#orge47eeab">1.10.1. DOOM</a></li>
<li><a href="#org264d649">1.10.2. License</a></li>
<li><a href="#org944ceae">1.10.3. Discussion</a></li>
<li><a href="#orgcd4b5d5">1.10.4. Refs</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgb8f7e40" class="outline-2">
<h2 id="orgb8f7e40"><span class="section-number-2">1</span> Week12</h2>
<div class="outline-text-2" id="text-1">
<p>
<a href="https://github.com/abramhindle/CMPUT201W20B2-public/tree/master/week12">https://github.com/abramhindle/CMPUT201W20B2-public/tree/master/week12</a>
</p>
</div>
<div id="outline-container-org3b3ae76" class="outline-3">
<h3 id="org3b3ae76"><span class="section-number-3">1.1</span> Copyright Statement</h3>
<div class="outline-text-3" id="text-1-1">
<p>
If you are in CMPUT201 at UAlberta this code is released in the public
domain to you.
</p>

<p>
Otherwise it is (c) 2020 Abram Hindle, Hazel Campbell AGPL3.0+
</p>
</div>

<div id="outline-container-orgcb68c08" class="outline-4">
<h4 id="orgcb68c08"><span class="section-number-4">1.1.1</span> License</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
CMPUT 201 C Notes
Copyright (C) 2020 Abram Hindle, Hazel Campbell
</p>

<p>
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.
</p>

<p>
This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.
</p>

<p>
You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <a href="https://www.gnu.org/licenses/">https://www.gnu.org/licenses/</a>.
</p>
</div>
</div>


<div id="outline-container-org6cf6ec6" class="outline-4">
<h4 id="org6cf6ec6"><span class="section-number-4">1.1.2</span> Hazel Code is licensed under AGPL3.0+</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
Hazel's code is also found here
<a href="https://github.com/hazelybell/examples/tree/C-2020-01">https://github.com/hazelybell/examples/tree/C-2020-01</a>
</p>

<p>
Hazel code is licensed: The example code is licensed under the AGPL3+
license, unless otherwise noted.
</p>
</div>
</div>
</div>

<div id="outline-container-org6f0e2a7" class="outline-3">
<h3 id="org6f0e2a7"><span class="section-number-3">1.2</span> Alternative version</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Checkout the .txt, the .pdf, and the .html version
</p>
</div>
</div>

<div id="outline-container-org6296ce0" class="outline-3">
<h3 id="org6296ce0"><span class="section-number-3">1.3</span> Init ORG-MODE</h3>
<div class="outline-text-3" id="text-1-3">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">I need this for org-mode to work well</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">If we have a new org-mode use ob-shell</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">otherwise use ob-sh --- but not both!</span>
(<span style="color: #a020f0;">if</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">ob-shell</span> nil 'noerror)
  (<span style="color: #a020f0;">progn</span>
    (org-babel-do-load-languages 'org-babel-load-languages '((shell . t))))
  (<span style="color: #a020f0;">progn</span>
    (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">ob-sh</span>)
    (org-babel-do-load-languages 'org-babel-load-languages '((sh . t)))))
(org-babel-do-load-languages 'org-babel-load-languages '((C . t)))
(org-babel-do-load-languages 'org-babel-load-languages '((python . t)))
(<span style="color: #a020f0;">setq</span> org-src-fontify-natively t)
(<span style="color: #a020f0;">setq</span> org-confirm-babel-evaluate nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">danger!</span>
(custom-set-faces
 '(org-block ((t (<span style="color: #483d8b;">:inherit</span> shadow <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"black"</span>))))
 '(org-code ((t (<span style="color: #483d8b;">:inherit</span> shadow <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"black"</span>)))))
</pre>
</div>
</div>

<div id="outline-container-org7a921e7" class="outline-4">
<h4 id="org7a921e7"><span class="section-number-4">1.3.1</span> Org export</h4>
<div class="outline-text-4" id="text-1-3-1">
<div class="org-src-container">
<pre class="src src-elisp">(org-html-export-to-html)
(org-latex-export-to-pdf)
(org-ascii-export-to-ascii)
</pre>
</div>
</div>
</div>


<div id="outline-container-org8c0d0e0" class="outline-4">
<h4 id="org8c0d0e0"><span class="section-number-4">1.3.2</span> Org Template</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
Copy and paste this to demo C
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">argc</span>, <span style="color: #228b22;">char</span>**<span style="color: #a0522d;">argv</span>) {
    <span style="color: #a020f0;">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6233cef" class="outline-3">
<h3 id="org6233cef"><span class="section-number-3">1.4</span> Remember how to compile?</h3>
<div class="outline-text-3" id="text-1-4">
<p>
gcc  -std=c99 -pedantic -Wall -Wextra -ftrapv -ggdb3 -o programname programname.c
</p>
</div>
</div>

<div id="outline-container-org98e2b72" class="outline-3">
<h3 id="org98e2b72"><span class="section-number-3">1.5</span> Numbers!</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Computers love powers of 2 because we calculate everything via bits.
</p>

<p>
Bases used on computers:
</p>

<p>
2, 8, 10, 16
</p>

<ul class="org-ul">
<li>32 in base 16 is  2*pow(16,1) = 0x20</li>
<li>32 in base 10 is  3*pow(10,1) + 2*pow(10,0) = 3*10 + 2*1 = 32</li>
<li>32 in base 8 is   4*pow(8,1) = 4*8 = 32 = 040</li>
<li>32 in base 2 is   1*pow(2,5) = 0b100000</li>

<li>31 in base 16 is  1*pow(16,1) + 15*pow(16,0)</li>
<li>31 in base 10 is  3*pow(10,1) + 1*pow(10,0)</li>
<li>31 in base 8 is   3*pow(8,1) + 7*pow(8,0)</li>
<li>31 in base 2 is   1*pow(2,4) + 1*pow(2,3) + 1*pow(2,2) + 1*pow(2,1) + 1*pow(2,0)</li>

<li>Notation for base 2 for 31:  0b11111 # not available in C, good in python</li>
<li>Notation for base 8 for 31:  037     # available in C    , good in python</li>
<li>Notation for base 10 for 31: 31      # available in C    , good in python</li>
<li>Notation for base 16 for 31: 0x1F    # available in C    , good in python</li>
</ul>
</div>

<div id="outline-container-org6599483" class="outline-4">
<h4 id="org6599483"><span class="section-number-4">1.5.1</span> Binary</h4>
<div class="outline-text-4" id="text-1-5-1">
<pre class="example">
Base 2: powers of 2

Digits: 0,1

0:  0b00000  8:  0b01000
1:  0b00001  9:  0b01001 
2:  0b00010 10:  0b01010 
3:  0b00011 11:  0b01011 
4:  0b00100 12:  0b01100
5:  0b00101 13:  0b01101
6:  0b00110 14:  0b01110         
7:  0b00111 15:  0b01111
            16:  0b10000
</pre>
</div>
</div>

<div id="outline-container-org633b006" class="outline-4">
<h4 id="org633b006"><span class="section-number-4">1.5.2</span> Octal</h4>
<div class="outline-text-4" id="text-1-5-2">
<div class="org-src-container">
<pre class="src src-C"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
   printf(<span style="color: #8b2252;">"%d\n"</span>, 037);
}
</pre>
</div>

<pre class="example">
31
</pre>


<pre class="example">
Base 8: powers of 8

3 bits

Digits: 0,1,2,3,4,5,6,7

0:  000  8: 010
1:  001  9: 011   
2:  002 10: 012   
3:  003 11: 013   
4:  004 12: 014  
5:  005 13: 015  
6:  006 14: 016           
7:  007 15: 017  
        16: 020

07:                            7 =   7
077:                     7*8 + 7 =  63
0777:            7*8*8 + 7*8 + 7 = 511
07777: 7*8*8*8 + 7*8*8 + 7*8 + 7 = 4095
</pre>
</div>
</div>

<div id="outline-container-org55b77fc" class="outline-4">
<h4 id="org55b77fc"><span class="section-number-4">1.5.3</span> Base10 Review</h4>
<div class="outline-text-4" id="text-1-5-3">
<pre class="example">
Base 10: power of 10

   Digits: 0,1,2,3,4,5,6,7,8,9

~4 bits - not a power of 2

0:  0  8:  8
1:  1  9:  9   
2:  2 10: 10  
3:  3 11: 11  
4:  4 12: 12  
5:  5 13: 13 
6:  6 14: 14          
7:  7 15: 15 
      16: 16
</pre>
</div>
</div>

<div id="outline-container-org60224f4" class="outline-4">
<h4 id="org60224f4"><span class="section-number-4">1.5.4</span> Hex Review</h4>
<div class="outline-text-4" id="text-1-5-4">
<pre class="example">
Base 16: power of 16

   Digits: 0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F
or Digits: 0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f

0:  0x00  8: 0x08
1:  0x01  9: 0x09   
2:  0x02 10: 0x0A  
3:  0x03 11: 0x0B   
4:  0x04 12: 0x0C  
5:  0x05 13: 0x0D  
6:  0x06 14: 0x0E           
7:  0x07 15: 0x0F  
         16: 0x10
0xF    =                                  15 =    15 = 2^4 - 1
0xFF   =                          15*16 + 15 =   255 = 2^8 - 1
0xFFF  =               15*16*16 + 15*16 + 15 =  4095 = 2^12 - 1
0xFFFF = 15*16*16*16 + 15*16*16 + 15*16 + 15 = 65535 = 2^16 - 1

Digit Lookup

0:  0x0 0b0000     8: 0x8 0b1000
1:  0x1 0b0001     9: 0x9 0b1001  
2:  0x2 0b0010    10: 0xA 0b1010 
3:  0x3 0b0011    11: 0xB 0b1011  
4:  0x4 0b0100    12: 0xC 0b1100 
5:  0x5 0b0101    13: 0xD 0b1101 
6:  0x6 0b0110    14: 0xE 0b1110          
7:  0x7 0b0111    15: 0xF 0b1111 

1 nibble = 4 bits = 1 hex digit
</pre>
</div>
</div>
</div>

<div id="outline-container-org0aead2a" class="outline-3">
<h3 id="org0aead2a"><span class="section-number-3">1.6</span> Floating Point Numbers</h3>
<div class="outline-text-3" id="text-1-6">
</div>
<div id="outline-container-org97021f5" class="outline-4">
<h4 id="org97021f5"><span class="section-number-4">1.6.1</span> Resources</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
Helpful resources:
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/IEEE_754">https://en.wikipedia.org/wiki/IEEE_754</a></li>
<li><a href="http://steve.hollasch.net/cgindex/coding/ieeefloat.html">http://steve.hollasch.net/cgindex/coding/ieeefloat.html</a></li>
</ul>
</div>
</div>

<div id="outline-container-org0b8a301" class="outline-4">
<h4 id="org0b8a301"><span class="section-number-4">1.6.2</span> Single precision IEEE754 floating point numbers</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
Type: float
</p>

<p>
Size: 32 bits / 4 bytes
</p>

<p>
-Sign: 0 - positive, 1 negative
-Exponent: unsigned 8 bit integer with 127 (2<sup>7</sup>-1) offset
</p>
<ul class="org-ul">
<li>-126 to 127</li>
<li>1*pow(2,-126) to 1*pow(2,127)</li>
</ul>
<ul class="org-ul">
<li>Fraction: 24 bits (only 23 used). The first bit is implied. 
<ul class="org-ul">
<li>So 00000000000000000000000 is actually 100000000000000000000000</li>
</ul></li>
<li>0.19e2</li>
<li>1.9e1</li>
<li>100*0.19 = 19</li>
<li>b1.11e1</li>
<li>b0.111e2</li>
<li>1.0101e2 = 1*2<sup>2</sup> + 0*2<sup>1</sup> + 1*2<sup>0</sup>+ 0*2<sup>-1</sup> + 1*2<sup>-2</sup>
= 4             + 1             + 1/4    = 5.25</li>
<li>1.1101e-4 = 1*2<sup>-4</sup> + 1*2<sup>-5</sup> + 1*2<sup>-6</sup> + 1*2-8
= 1/16  + 1/32  + 1/64 + 1/256
= 0.11328125</li>
</ul>
<p>
2<sup>-126</sup>
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #b22222;">/*</span><span style="color: #b22222;">printf("%d\n", 0.0F == -0.0F);</span>
<span style="color: #b22222;">    printf("%g\n", 1.0F * -0.0F);</span>
<span style="color: #b22222;">    printf("%0.3f\n", 1.0e+126F * 4.0F);</span>
<span style="color: #b22222;">    printf("%0.3f\n", 1.0e+126F * -4.0F); </span><span style="color: #b22222;">*/</span>
    printf(<span style="color: #8b2252;">"%e\n"</span>, 1.0e38F + 2.0e38F);
    printf(<span style="color: #8b2252;">"%e\n"</span>, 1.0e38F + 4.0e38F);
}
</pre>
</div>

<pre class="example">
3.000000e+38
inf
</pre>


<pre class="example">
-0.010 = 1*1/100
</pre>



<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-right">Sign (1 bit)</td>
<td class="org-right">Exponent (8 bit)</td>
<td class="org-right">b10</td>
<td class="org-right">Fraction (23 bit)</td>
<td class="org-right">Value</td>
<td class="org-left">base 2</td>
</tr>

<tr>
<td class="org-right">0</td>
<td class="org-right">01111100</td>
<td class="org-right">-3</td>
<td class="org-right">01000000000000000000000</td>
<td class="org-right">0.15625</td>
<td class="org-left">1/8 + 1/32</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">01111100</td>
<td class="org-right">-3</td>
<td class="org-right">01000000000000000000000</td>
<td class="org-right">-0.15625</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">0</td>
<td class="org-right">00000000</td>
<td class="org-right">0</td>
<td class="org-right">00000000000000000000000</td>
<td class="org-right">0</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">00000000</td>
<td class="org-right">0</td>
<td class="org-right">00000000000000000000000</td>
<td class="org-right">-0</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">0</td>
<td class="org-right">11000000</td>
<td class="org-right">65</td>
<td class="org-right">00000000000000000000000</td>
<td class="org-right">3.68e+19</td>
<td class="org-left">2<sup>65</sup></td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">11111111</td>
<td class="org-right">0</td>
<td class="org-right">00000000000000000000000</td>
<td class="org-right">-inf</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">0</td>
<td class="org-right">11111111</td>
<td class="org-right">0</td>
<td class="org-right">00000000000000000000000</td>
<td class="org-right">inf</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">0</td>
<td class="org-right">11111111</td>
<td class="org-right">0</td>
<td class="org-right">10000000000000000000000</td>
<td class="org-right">nan</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">0</td>
<td class="org-right">11111111</td>
<td class="org-right">0</td>
<td class="org-right">00000000000000000000001</td>
<td class="org-right">nan</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>Neat design trick: you can sort them as signed integers (two's complement)!</li>
<li>-0 is right before 0 for signed integer sorting</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-right">0</td>
<td class="org-right">01111100</td>
<td class="org-right">-3</td>
<td class="org-right">01000000000000000000000</td>
<td class="org-right">0.15625</td>
<td class="org-left">1/8 + 1/32</td>
</tr>
</tbody>
</table>

<p>
0.15625 to floating point. Implied bit is pow(2,-3)
</p>

<p>
pow(2,-3) + 0*pow(2,-4) + 1*pow(2,-5) (pow(2,5)==32, pow(2,-5) = 1/32.0)
</p>
</div>
</div>

<div id="outline-container-org5dd151a" class="outline-4">
<h4 id="org5dd151a"><span class="section-number-4">1.6.3</span> Let's explore the bits of floats</h4>
<div class="outline-text-4" id="text-1-6-3">
<div class="org-src-container">
<pre class="src src-C"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;math.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;inttypes.h&gt;</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">0x1L MUST be used 0x1 causes bugs</span>
<span style="color: #483d8b;">#define</span> <span style="color: #0000ff;">BIT</span>(<span style="color: #a0522d;">x</span>,<span style="color: #a0522d;">y</span>) (x &amp; (0x1L &lt;&lt; y))
<span style="color: #483d8b;">#define</span> <span style="color: #a0522d;">MAXBITSTRBITS</span> 129
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">char</span> <span style="color: #a0522d;">_bitstr</span>[MAXBITSTRBITS] = { <span style="color: #8b2252;">'\0'</span> };
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">char</span> * <span style="color: #0000ff;">bitString</span>(<span style="color: #228b22;">uint64_t</span> <span style="color: #a0522d;">value</span>, <span style="color: #a020f0;">const</span> <span style="color: #228b22;">unsigned</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">bits</span>) {
    <span style="color: #b22222;">// </span><span style="color: #b22222;">iterator must be uint64_t</span>
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">uint64_t</span> <span style="color: #a0522d;">i</span> = 0 ; i &lt; bits; i++) {
        <span style="color: #228b22;">char</span> <span style="color: #a0522d;">bit</span> = (BIT(value,i))?<span style="color: #8b2252;">'1'</span>:<span style="color: #8b2252;">'0'</span>;
        _bitstr[bits-1-i] = bit;
    }
    _bitstr[bits] = <span style="color: #8b2252;">'\0'</span>;
    <span style="color: #a020f0;">return</span> _bitstr;
}

<span style="color: #b22222;">// </span><span style="color: #b22222;">NOT PORTABLE</span>
<span style="color: #a020f0;">struct</span> <span style="color: #228b22;">float_t</span> {
    <span style="color: #228b22;">unsigned</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">mantissa</span>:23; <span style="color: #b22222;">// </span><span style="color: #b22222;">LOWEST</span>
    <span style="color: #228b22;">unsigned</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">exponent</span>:8;
    <span style="color: #228b22;">unsigned</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">sign</span>:1; <span style="color: #b22222;">// </span><span style="color: #b22222;">HIGHEST</span>
};
<span style="color: #b22222;">// </span><span style="color: #b22222;">type pun for fun!</span>
<span style="color: #a020f0;">union</span> <span style="color: #228b22;">floatint</span> {
    <span style="color: #228b22;">float</span> <span style="color: #a0522d;">f</span>;
    <span style="color: #228b22;">uint32_t</span> <span style="color: #a0522d;">i</span>;
    <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">float_t</span> <span style="color: #a0522d;">t</span>;
};


<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">float</span> <span style="color: #a0522d;">floats</span>[] = {
        0.0,
       -0.0,
        INFINITY,
       -INFINITY,
        NAN,
        0.00001,
        0.0001,
        0.001,
        0.01,
        0.1,
        1.0,
        1/64.0,
        1/32.0,
        1/16.0,
        1/8.0,
        1/4.0,
        1/2.0,
        1.0,
        2.0,
        4.0,
        128.0,
        65536.0,
        0.15625,
        -0.15625,
        36893488147419103232.0, <span style="color: #b22222;">// </span><span style="color: #b22222;">2**65</span>
        -36893488147419103232.0 <span style="color: #b22222;">// </span><span style="color: #b22222;">2**65</span>
    };
    <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">nfloats</span> = <span style="color: #a020f0;">sizeof</span>(floats)/<span style="color: #a020f0;">sizeof</span>(<span style="color: #228b22;">float</span>);
    printf(<span style="color: #8b2252;">"We're printing floats!\n"</span>);
    printf(<span style="color: #8b2252;">"sizeof(floatint) == %lu\n"</span>, <span style="color: #a020f0;">sizeof</span>(<span style="color: #a020f0;">union</span> <span style="color: #228b22;">floatint</span>));
    printf(<span style="color: #8b2252;">"sizeof(float_t) == %lu\n"</span>, <span style="color: #a020f0;">sizeof</span>(<span style="color: #a020f0;">struct</span> <span style="color: #228b22;">float_t</span>));
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">i</span> = 0; i &lt; nfloats; i++) {
        <span style="color: #228b22;">float</span> <span style="color: #a0522d;">f</span> = floats[i];
        <span style="color: #a020f0;">union</span> <span style="color: #228b22;">floatint</span> <span style="color: #a0522d;">fi</span> = {.f=f};
        printf(<span style="color: #8b2252;">"%12g 0x%08x 0b%s\n"</span>, f, fi.i, bitString(fi.i, 32));
        <span style="color: #b22222;">/*</span>
<span style="color: #b22222;">        printf("%12g 0x%08x sign: %hhu exponent: %3hhu exp-127: %4d mantissa: 0x%06x\n", </span>
<span style="color: #b22222;">               f,</span>
<span style="color: #b22222;">               fi.i,</span>
<span style="color: #b22222;">               fi.t.sign,</span>
<span style="color: #b22222;">               fi.t.exponent,</span>
<span style="color: #b22222;">               (int)fi.t.exponent - (int)127,</span>
<span style="color: #b22222;">               fi.t.mantissa</span>
<span style="color: #b22222;">        );</span><span style="color: #b22222;">*/</span>
        <span style="color: #b22222;">// </span><span style="color: #b22222;">We don't need bitfields</span>
        printf(<span style="color: #8b2252;">"%12g 0x%08x sign: %hhu exponent: %hhu exp-127: %4d mantissa: 0x%06x\n"</span>, 
               f,
               fi.i,
               (fi.i &gt;&gt; 31),
               ((fi.i &lt;&lt; 1) &gt;&gt; 24),
               (<span style="color: #228b22;">int</span>)((fi.i &lt;&lt; 1) &gt;&gt; 24) - (<span style="color: #228b22;">int</span>)127,
               (fi.i &amp; 0x007FFFFF)
               <span style="color: #b22222;">//</span><span style="color: #b22222;">0000 0000 0111 1111 1111 1111 1111 1111</span>
               <span style="color: #b22222;">//</span><span style="color: #b22222;">0      0   7    F    F   F    F    F</span>
        );


    }
    puts(<span style="color: #8b2252;">""</span>);
}
</pre>
</div>

<pre class="example">
We're printing floats!
sizeof(floatint) == 4
sizeof(float_t) == 4
           0 0x00000000 0b00000000000000000000000000000000
           0 0x00000000 sign: 0 exponent: 0 exp-127: -127 mantissa: 0x000000
          -0 0x80000000 0b10000000000000000000000000000000
          -0 0x80000000 sign: 1 exponent: 0 exp-127: -127 mantissa: 0x000000
         inf 0x7f800000 0b01111111100000000000000000000000
         inf 0x7f800000 sign: 0 exponent: 255 exp-127:  128 mantissa: 0x000000
        -inf 0xff800000 0b11111111100000000000000000000000
        -inf 0xff800000 sign: 1 exponent: 255 exp-127:  128 mantissa: 0x000000
         nan 0x7fc00000 0b01111111110000000000000000000000
         nan 0x7fc00000 sign: 0 exponent: 255 exp-127:  128 mantissa: 0x400000
       1e-05 0x3727c5ac 0b00110111001001111100010110101100
       1e-05 0x3727c5ac sign: 0 exponent: 110 exp-127:  -17 mantissa: 0x27c5ac
      0.0001 0x38d1b717 0b00111000110100011011011100010111
      0.0001 0x38d1b717 sign: 0 exponent: 113 exp-127:  -14 mantissa: 0x51b717
       0.001 0x3a83126f 0b00111010100000110001001001101111
       0.001 0x3a83126f sign: 0 exponent: 117 exp-127:  -10 mantissa: 0x03126f
        0.01 0x3c23d70a 0b00111100001000111101011100001010
        0.01 0x3c23d70a sign: 0 exponent: 120 exp-127:   -7 mantissa: 0x23d70a
         0.1 0x3dcccccd 0b00111101110011001100110011001101
         0.1 0x3dcccccd sign: 0 exponent: 123 exp-127:   -4 mantissa: 0x4ccccd
           1 0x3f800000 0b00111111100000000000000000000000
           1 0x3f800000 sign: 0 exponent: 127 exp-127:    0 mantissa: 0x000000
    0.015625 0x3c800000 0b00111100100000000000000000000000
    0.015625 0x3c800000 sign: 0 exponent: 121 exp-127:   -6 mantissa: 0x000000
     0.03125 0x3d000000 0b00111101000000000000000000000000
     0.03125 0x3d000000 sign: 0 exponent: 122 exp-127:   -5 mantissa: 0x000000
      0.0625 0x3d800000 0b00111101100000000000000000000000
      0.0625 0x3d800000 sign: 0 exponent: 123 exp-127:   -4 mantissa: 0x000000
       0.125 0x3e000000 0b00111110000000000000000000000000
       0.125 0x3e000000 sign: 0 exponent: 124 exp-127:   -3 mantissa: 0x000000
        0.25 0x3e800000 0b00111110100000000000000000000000
        0.25 0x3e800000 sign: 0 exponent: 125 exp-127:   -2 mantissa: 0x000000
         0.5 0x3f000000 0b00111111000000000000000000000000
         0.5 0x3f000000 sign: 0 exponent: 126 exp-127:   -1 mantissa: 0x000000
           1 0x3f800000 0b00111111100000000000000000000000
           1 0x3f800000 sign: 0 exponent: 127 exp-127:    0 mantissa: 0x000000
           2 0x40000000 0b01000000000000000000000000000000
           2 0x40000000 sign: 0 exponent: 128 exp-127:    1 mantissa: 0x000000
           4 0x40800000 0b01000000100000000000000000000000
           4 0x40800000 sign: 0 exponent: 129 exp-127:    2 mantissa: 0x000000
         128 0x43000000 0b01000011000000000000000000000000
         128 0x43000000 sign: 0 exponent: 134 exp-127:    7 mantissa: 0x000000
       65536 0x47800000 0b01000111100000000000000000000000
       65536 0x47800000 sign: 0 exponent: 143 exp-127:   16 mantissa: 0x000000
     0.15625 0x3e200000 0b00111110001000000000000000000000
     0.15625 0x3e200000 sign: 0 exponent: 124 exp-127:   -3 mantissa: 0x200000
    -0.15625 0xbe200000 0b10111110001000000000000000000000
    -0.15625 0xbe200000 sign: 1 exponent: 124 exp-127:   -3 mantissa: 0x200000
 3.68935e+19 0x60000000 0b01100000000000000000000000000000
 3.68935e+19 0x60000000 sign: 0 exponent: 192 exp-127:   65 mantissa: 0x000000
-3.68935e+19 0xe0000000 0b11100000000000000000000000000000
-3.68935e+19 0xe0000000 sign: 1 exponent: 192 exp-127:   65 mantissa: 0x000000
</pre>
</div>
</div>

<div id="outline-container-org6d3557f" class="outline-4">
<h4 id="org6d3557f"><span class="section-number-4">1.6.4</span> How do I avoid typepunning?</h4>
<div class="outline-text-4" id="text-1-6-4">
<p>
The C99 is OK with union type punning :-/
</p>

<p>
The "blessed" way that is C11 compatible is memcpy.
</p>

<p>
Bitfields are generally considered "CURSED" due to platform specific
behaviour.
</p>

<p>
You should only memcpy direct types like uint64<sub>t</sub> and double IFF they
have the same size.
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #b22222;">// </span><span style="color: #b22222;">PUN64 copies the bits of double value into a 64bit unsigned int and</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">returns it.</span>
<span style="color: #228b22;">uint64_t</span> <span style="color: #0000ff;">PUN64</span>(<span style="color: #228b22;">double</span> <span style="color: #a0522d;">value</span>) {
  <span style="color: #228b22;">uint64_t</span> <span style="color: #a0522d;">output</span> = 0;
  memcpy(&amp;output, &amp;value, <span style="color: #a020f0;">sizeof</span>(uint64_t));
  <span style="color: #a020f0;">return</span> output;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org00fb701" class="outline-3">
<h3 id="org00fb701"><span class="section-number-3">1.7</span> Modules</h3>
<div class="outline-text-3" id="text-1-7">
<p>
A module can have different levels of granularity:
</p>

<ul class="org-ul">
<li>function level</li>
<li>file level (.c or .h)</li>
<li>library level (shared code .so)</li>
<li>process level (an executable)</li>
<li>platform level (GNU/Linux)</li>
<li>service level (distributed systems, webservices)</li>
<li>ecosystem level (Ubuntu or pip or web)</li>
</ul>

<p>
In C typically a module refers to a pair of .c file or a pair of .h
and .c files.
</p>
</div>
</div>

<div id="outline-container-org3573c9a" class="outline-3">
<h3 id="org3573c9a"><span class="section-number-3">1.8</span> Coupling</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Coupling often refers to how much 1 module (like a .c file or a .h
file) relies on other modules.
</p>
</div>

<div id="outline-container-orge147e27" class="outline-4">
<h4 id="orge147e27"><span class="section-number-4">1.8.1</span> Coupling</h4>
<div class="outline-text-4" id="text-1-8-1">
<p>
1 fast way in C of calculating coupling is to count the number of
include directives.
</p>

<p>
The number of includes gives one an idea of how many modules that your
module relies upon.
</p>

<p>
In object oriented languages like Java or C++ coupling often refers to
the number of modules (Classes) that a single class refers to.
</p>

<p>
Coupling is related to dependencies. Too many dependencies makes a
system complicated&#x2013;often erroneously called complex. If one of these
dependencies changes, breaks, is deprecated it can harm anything that
relies upon it. Knowing that a module is heavily relied upon is
important as well because it implies the risk involved with changing
that module.
</p>

<p>
High coupling is bad because it makes code weak to change:
</p>
<ul class="org-ul">
<li>too many dependencies increase risk of change</li>
<li>too many dependencies increase bug risk</li>
<li>too many dependencies means dependencies will probably change</li>
</ul>

<p>
In "structured design" as suggested by Constantine there are multiple
kinds of coupling.
</p>

<ul class="org-ul">
<li>Data coupling: you pass parameters to another module
<ul class="org-ul">
<li>connected by name</li>
</ul></li>
<li>Control coupling: you use another module for control flow</li>
<li>Content/Common coupling: when you use code directly from another module
<ul class="org-ul">
<li>macros can cause this problem</li>
<li>includes could do this if it includes code.</li>
</ul></li>
</ul>

<p>
Fundamentally in C at the file level we're really just going to be
using data coupling. If you say coupling most people will assume this
is what you are talking about. Essentially your .h or .c file refers
to other modules and their parts by name.
</p>
</div>
</div>

<div id="outline-container-org4273518" class="outline-4">
<h4 id="org4273518"><span class="section-number-4">1.8.2</span> Graph Coupling</h4>
<div class="outline-text-4" id="text-1-8-2">
<p>
From Pressman and Dhama [DHA95].
</p>

<p>
Model your modules as a directed graph.
</p>
<ul class="org-ul">
<li>Modules are vertices.</li>
<li>References are edges.</li>
</ul>

<p>
Fan-out is the number of modules a module calls.
</p>

<p>
Fan-in is the number of modules that call that module. Fan-in does not
imply the module is truly coupled to other modules, just that it is
popular and relied upon. Meaning it shouldn't change much!
</p>

<p>
From Pressman and Dhama [DHA95]:
</p>

<p>
For data and control flow coupling,
</p>

<ul class="org-ul">
<li>d<sub>i</sub> = number of input data parameters</li>
<li>c<sub>i</sub> = number of input control parameters</li>
<li>d<sub>o</sub> = number of output data parameters</li>
<li>c<sub>o</sub> = number of output control parameters</li>
</ul>

<p>
For global coupling,
</p>

<ul class="org-ul">
<li>g<sub>d</sub> = number of global variables used as data</li>
<li>g<sub>c</sub> = number of global variables used as control</li>
</ul>

<p>
For environmental coupling,
</p>

<ul class="org-ul">
<li>w = number of modules called (fan-out)</li>
<li>r = number of modules calling the module under consideration (fan-in)</li>
</ul>

<p>
Using these measures, a module coupling indicator, m c , is defined in the following way:
</p>

<ul class="org-ul">
<li>m<sub>c</sub> = k/M = 1/(d<sub>i</sub> + (a * c<sub>i</sub> ) + d<sub>o</sub> + (b * c<sub>o</sub> ) + g<sub>d</sub> + (c* g<sub>c</sub> ) + w + r)
<ul class="org-ul">
<li>alternative m<sub>c</sub> = k/M = 1/(1 + w + r)</li>
</ul></li>
<li>where k = 1, a proportionality constant 8 and</li>

<li>M = d<sub>i</sub> + (a * c<sub>i</sub> ) + d<sub>o</sub> + (b * c<sub>o</sub> ) + g<sub>d</sub> + (c* g<sub>c</sub> ) + w + r</li>
<li>where a = b = c = 2.</li>
</ul>

<p>
High m<sub>c</sub>: low coupling
Low  m<sub>c</sub>: high coupling
</p>
</div>

<ol class="org-ol">
<li><a id="orgd19664d"></a>Coupling<sub>h</sub> &#x2013; my take<br />
<div class="outline-text-5" id="text-1-8-2-1">
<p>
My take?
</p>

<p>
Forget about the nitty gritty coupling and focus on
fan-out and dependencies.
</p>

<p>
I would calculate coupling as unidirectional:
</p>

<ul class="org-ul">
<li>where x = number of unique external function calls</li>
<li>where y = number of unique external variable access</li>
<li>where z = number of unique externally defined types</li>
<li>where w = number of modules called (fan-out)</li>
<li>where lambda ~ 4 or however more important you feel that fan-out is</li>
<li>w = number of modules called (fan-out)</li>
<li>coupling<sub>h</sub> = 1 / (1 + lambda*w + x + y + z)</li>
</ul>

<p>
If coupling<sub>h</sub> is 1 you are decoupled.
</p>

<p>
If coupling<sub>h</sub> in near 0.0 you are pretty heavily coupled.
</p>

<p>
For a C module I recommend counting both .h and .c together
</p>

<p>
You can invent your own coupling measures for your own purposes.
</p>
</div>
</li>

<li><a id="orgb496a00"></a>Coupling Examples<br />
<ol class="org-ol">
<li><a id="org0ceee86"></a>No Coupling<br />
<div class="outline-text-6" id="text-1-8-2-2-1">
<div class="org-src-container">
<pre class="src src-C"><span style="color: #b22222;">// </span><span style="color: #b22222;">0 coupling, no modules</span>
<span style="color: #483d8b;">#define</span> <span style="color: #a0522d;">RET</span> 404
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #a020f0;">return</span> RET;
}
</pre>
</div>

<ul class="org-ul">
<li>w = x = y = z = 0</li>
<li>lamba = 4</li>
<li>coupling<sub>h</sub> = 1/(1+0) = 1</li>
</ul>
</div>
</li>

<li><a id="org2651dd4"></a>A little coupling<br />
<div class="outline-text-6" id="text-1-8-2-2-2">
<p>
We're now related to the stdlib IO routines
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>
<span style="color: #483d8b;">#define</span> <span style="color: #a0522d;">RET</span>
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    printf(<span style="color: #8b2252;">"%d\n"</span>, RET);
    <span style="color: #a020f0;">return</span> RET;
}
</pre>
</div>

<ul class="org-ul">
<li>w = 1</li>
<li>x = 1</li>
<li>y = z = 0</li>
<li>lamba = 4</li>
<li>coupling<sub>h</sub> = 1/(4*1+1+0+0) = 1/5</li>
</ul>
</div>
</li>


<li><a id="orgffd2023"></a>A little more coupling<br />
<div class="outline-text-6" id="text-1-8-2-2-3">
<p>
Now we're bound to stdlib.h and randr
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdlib.h&gt;</span>
<span style="color: #483d8b;">#define</span> <span style="color: #a0522d;">RET</span>
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    printf(<span style="color: #8b2252;">"%d\n"</span>, rand());
    <span style="color: #a020f0;">return</span> RET;
}
</pre>
</div>

<ul class="org-ul">
<li>w = 2</li>
<li>x = 2</li>
<li>y = z = 0</li>
<li>lamba = 4</li>
<li>coupling<sub>h</sub> = 1/(4*2+2+0+0) = 1/10</li>
</ul>
</div>
</li>

<li><a id="orgb310d62"></a>More coupling<br />
<div class="outline-text-6" id="text-1-8-2-2-4">
<p>
Now we're bound to string.h as well
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdlib.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;string.h&gt;</span>
<span style="color: #483d8b;">#define</span> <span style="color: #a0522d;">RET</span>
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">char</span> * <span style="color: #a0522d;">str1</span> = <span style="color: #8b2252;">"aaaaaa"</span>;
    <span style="color: #228b22;">char</span> * <span style="color: #a0522d;">str2</span> = <span style="color: #8b2252;">"aaaaab"</span>;
    printf(<span style="color: #8b2252;">"%d\n"</span>, rand());
    printf(<span style="color: #8b2252;">"%d\n"</span>, strcmp(str1,str2));
    <span style="color: #a020f0;">return</span> RET;
}
</pre>
</div>

<ul class="org-ul">
<li>w = 3</li>
<li>x = 3</li>
<li>y = z = 0</li>
<li>lamba = 4</li>
<li>coupling<sub>h</sub> = 1/(4*3+3+0+0) = 1/15</li>
</ul>
</div>
</li>

<li><a id="orgbea7206"></a>Even More Coupling:<br />
<div class="outline-text-6" id="text-1-8-2-2-5">
<div class="org-src-container">
<pre class="src src-C"><span style="color: #b22222;">/*</span>

<span style="color: #b22222;">                            Encode CSV file into MIDI</span>

<span style="color: #b22222;">        The CSV file must be in the format generated by midicsv--while</span>
<span style="color: #b22222;">        you can add and delete events and change their contents, the</span>
<span style="color: #b22222;">        overall organisation of the file must be the same.</span>

<span style="color: #b22222;">        Designed and implemented in October of 1998 by John Walker.</span>
<span style="color: #b22222;">        Revised and updated in February of 2004 by the same perp.</span>

<span style="color: #b22222;">                       http://www.fourmilab.ch/</span>

<span style="color: #b22222;">                This program is in the public domain.</span>

<span style="color: #b22222;">*/</span>

<span style="color: #483d8b;">#define</span> <span style="color: #a0522d;">PROG</span>    <span style="color: #8b2252;">"csvmidi"</span>

<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdlib.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;string.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;ctype.h&gt;</span>
<span style="color: #483d8b;">#ifdef</span> _WIN32
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;fcntl.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;io.h&gt;</span>
<span style="color: #483d8b;">#define</span> <span style="color: #a0522d;">strcasecmp</span> _stricmp
<span style="color: #483d8b;">#endif</span>

<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"version.h"</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"types.h"</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"midifile.h"</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"midio.h"</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"csv.h"</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"getopt.h"</span>
</pre>
</div>

<ul class="org-ul">
<li>w = 10 or 12</li>
<li>x = ??</li>
<li>y = z = ??</li>
<li>lamba = 4</li>
<li>coupling<sub>h</sub> = 1/(4*10+0+0) = 1/40</li>
</ul>
</div>
</li>


<li><a id="orgb4d82b8"></a>A lot of coupling<br />
<div class="outline-text-6" id="text-1-8-2-2-6">
<p>
GUI apps often rely on lots of libraries.
</p>

<p>
Here's the gnome evince PDF reader.
</p>

<p>
It needs:
</p>
<ul class="org-ul">
<li>GUI</li>
<li>PDF</li>
<li>Compression</li>
<li>???</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">ldd /usr/bin/evince
</pre>
</div>

<pre class="example">
linux-vdso.so.1 (0x00007ffcc9db0000)
libevdocument3.so.4 =&gt; /usr/lib/x86_64-linux-gnu/libevdocument3.so.4 (0x00007f08d0a3c000)
libevview3.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libevview3.so.3 (0x00007f08d07e5000)
libsecret-1.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libsecret-1.so.0 (0x00007f08d0595000)
libgnome-desktop-3.so.17 =&gt; /usr/lib/x86_64-linux-gnu/libgnome-desktop-3.so.17 (0x00007f08d0359000)
libgtk-3.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgtk-3.so.0 (0x00007f08cfa51000)
libgdk-3.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgdk-3.so.0 (0x00007f08cf75b000)
libpangocairo-1.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libpangocairo-1.0.so.0 (0x00007f08cf54e000)
libpango-1.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libpango-1.0.so.0 (0x00007f08cf301000)
libatk-1.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libatk-1.0.so.0 (0x00007f08cf0db000)
libcairo-gobject.so.2 =&gt; /usr/lib/x86_64-linux-gnu/libcairo-gobject.so.2 (0x00007f08ceed2000)
libcairo.so.2 =&gt; /usr/lib/x86_64-linux-gnu/libcairo.so.2 (0x00007f08cebb5000)
libgio-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgio-2.0.so.0 (0x00007f08ce816000)
libgdk_pixbuf-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgdk_pixbuf-2.0.so.0 (0x00007f08ce5f2000)
libgobject-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0 (0x00007f08ce39e000)
libglib-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0 (0x00007f08ce087000)
libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f08cdce9000)
libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f08cdaca000)
libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f08cd6d9000)
libgmodule-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgmodule-2.0.so.0 (0x00007f08cd4d5000)
libz.so.1 =&gt; /lib/x86_64-linux-gnu/libz.so.1 (0x00007f08cd2b8000)
libgstvideo-1.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgstvideo-1.0.so.0 (0x00007f08cd01f000)
libgstreamer-1.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgstreamer-1.0.so.0 (0x00007f08ccce4000)
libgcrypt.so.20 =&gt; /lib/x86_64-linux-gnu/libgcrypt.so.20 (0x00007f08cc9c8000)
libX11.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libX11.so.6 (0x00007f08cc690000)
libudev.so.1 =&gt; /lib/x86_64-linux-gnu/libudev.so.1 (0x00007f08cc472000)
libseccomp.so.2 =&gt; /lib/x86_64-linux-gnu/libseccomp.so.2 (0x00007f08cc22b000)
librt.so.1 =&gt; /lib/x86_64-linux-gnu/librt.so.1 (0x00007f08cc023000)
libXi.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libXi.so.6 (0x00007f08cbe13000)
libXfixes.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libXfixes.so.3 (0x00007f08cbc0d000)
libatk-bridge-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libatk-bridge-2.0.so.0 (0x00007f08cb9dc000)
libepoxy.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libepoxy.so.0 (0x00007f08cb6db000)
libpangoft2-1.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libpangoft2-1.0.so.0 (0x00007f08cb4c5000)
libfontconfig.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libfontconfig.so.1 (0x00007f08cb280000)
libXinerama.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXinerama.so.1 (0x00007f08cb07d000)
libXrandr.so.2 =&gt; /usr/lib/x86_64-linux-gnu/libXrandr.so.2 (0x00007f08cae72000)
libXcursor.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXcursor.so.1 (0x00007f08cac68000)
libXcomposite.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXcomposite.so.1 (0x00007f08caa65000)
libXdamage.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXdamage.so.1 (0x00007f08ca862000)
libxkbcommon.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libxkbcommon.so.0 (0x00007f08ca623000)
libwayland-cursor.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libwayland-cursor.so.0 (0x00007f08ca41b000)
libwayland-egl.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libwayland-egl.so.1 (0x00007f08ca219000)
libwayland-client.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libwayland-client.so.0 (0x00007f08ca00a000)
libXext.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libXext.so.6 (0x00007f08c9df8000)
libfreetype.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libfreetype.so.6 (0x00007f08c9b44000)
libthai.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libthai.so.0 (0x00007f08c993b000)
libpixman-1.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libpixman-1.so.0 (0x00007f08c9696000)
libpng16.so.16 =&gt; /usr/lib/x86_64-linux-gnu/libpng16.so.16 (0x00007f08c9464000)
libxcb-shm.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libxcb-shm.so.0 (0x00007f08c9261000)
libxcb.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libxcb.so.1 (0x00007f08c9039000)
libxcb-render.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libxcb-render.so.0 (0x00007f08c8e2c000)
libXrender.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXrender.so.1 (0x00007f08c8c22000)
libselinux.so.1 =&gt; /lib/x86_64-linux-gnu/libselinux.so.1 (0x00007f08c89fa000)
libresolv.so.2 =&gt; /lib/x86_64-linux-gnu/libresolv.so.2 (0x00007f08c87df000)
libmount.so.1 =&gt; /lib/x86_64-linux-gnu/libmount.so.1 (0x00007f08c858b000)
libffi.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libffi.so.6 (0x00007f08c8383000)
libpcre.so.3 =&gt; /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f08c8111000)
/lib64/ld-linux-x86-64.so.2 (0x00007f08d0ee2000)
libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f08c7f0d000)
libgstbase-1.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgstbase-1.0.so.0 (0x00007f08c7c98000)
liborc-0.4.so.0 =&gt; /usr/lib/x86_64-linux-gnu/liborc-0.4.so.0 (0x00007f08c7a1c000)
libgpg-error.so.0 =&gt; /lib/x86_64-linux-gnu/libgpg-error.so.0 (0x00007f08c7807000)
libdbus-1.so.3 =&gt; /lib/x86_64-linux-gnu/libdbus-1.so.3 (0x00007f08c75ba000)
libatspi.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libatspi.so.0 (0x00007f08c738a000)
libharfbuzz.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libharfbuzz.so.0 (0x00007f08c70ec000)
libexpat.so.1 =&gt; /lib/x86_64-linux-gnu/libexpat.so.1 (0x00007f08c6eba000)
libdatrie.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libdatrie.so.1 (0x00007f08c6cb3000)
libXau.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libXau.so.6 (0x00007f08c6aaf000)
libXdmcp.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 (0x00007f08c68a9000)
libblkid.so.1 =&gt; /lib/x86_64-linux-gnu/libblkid.so.1 (0x00007f08c665c000)
libsystemd.so.0 =&gt; /lib/x86_64-linux-gnu/libsystemd.so.0 (0x00007f08c63d8000)
libgraphite2.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libgraphite2.so.3 (0x00007f08c61ab000)
libbsd.so.0 =&gt; /lib/x86_64-linux-gnu/libbsd.so.0 (0x00007f08c5f96000)
libuuid.so.1 =&gt; /lib/x86_64-linux-gnu/libuuid.so.1 (0x00007f08c5d8f000)
liblzma.so.5 =&gt; /lib/x86_64-linux-gnu/liblzma.so.5 (0x00007f08c5b69000)
liblz4.so.1 =&gt; /usr/lib/x86_64-linux-gnu/liblz4.so.1 (0x00007f08c594d000)
</pre>

<ul class="org-ul">
<li>w ~ 70</li>
<li>x = ??</li>
<li>y = z = ??</li>
<li>lamba = 4</li>
<li>coupling<sub>h</sub> = 1/(4*70+0+0) = 1/280</li>
</ul>
</div>
</li>

<li><a id="org2ad9858"></a>More examples from Assignment 8<br />
<div class="outline-text-6" id="text-1-8-2-2-7">
<p>
checkinput.h 
</p>
<div class="org-src-container">
<pre class="src src-c"><span style="color: #b22222;">// </span><span style="color: #b22222;">Have a guard to ensure that we don't include it multiple times.</span>
<span style="color: #483d8b;">#if</span><span style="color: #483d8b;">n</span><span style="color: #483d8b;">def</span> _CHECKINPUT_H_
<span style="color: #b22222;">/* </span><span style="color: #b22222;">checkInput: given the result of scanf check if it </span>
<span style="color: #b22222;"> * 0 elements read or EOF. If so exit(1) with a warning.</span>
<span style="color: #b22222;"> *</span>
<span style="color: #b22222;"> </span><span style="color: #b22222;">*/</span>
<span style="color: #483d8b;">#define</span> <span style="color: #a0522d;">_CHECKINPUT_H_</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">checkInput</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">err</span>); <span style="color: #b22222;">// </span><span style="color: #b22222;">a prototype!</span>
<span style="color: #483d8b;">#endif</span>
</pre>
</div>

<ul class="org-ul">
<li>coupling<sub>h</sub> = 1 = 1/1</li>
</ul>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"parameters.h"</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdlib.h&gt;</span>

<span style="color: #b22222;">// </span><span style="color: #b22222;">You must implement a guard</span>

<span style="color: #a020f0;">struct</span> <span style="color: #228b22;">combo_t</span>;

<span style="color: #a020f0;">typedef</span> <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">combo_t</span> * <span style="color: #228b22;">Combo</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">Create a Cartesian Product Combo generator</span>
<span style="color: #228b22;">Combo</span> <span style="color: #0000ff;">createParameterCombo</span>();
<span style="color: #b22222;">// </span><span style="color: #b22222;">Add parameter definition to the Combo</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">addParameterDefCombo</span>(<span style="color: #228b22;">Combo</span> <span style="color: #a0522d;">combo</span>, <span style="color: #228b22;">ParameterDef</span> <span style="color: #a0522d;">def</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">Add a parameter of a previous parameter definition to the Combo</span>
<span style="color: #228b22;">size_t</span> <span style="color: #0000ff;">addParameterCombo</span>(<span style="color: #228b22;">Combo</span> <span style="color: #a0522d;">combo</span>, <span style="color: #228b22;">Parameter</span> <span style="color: #a0522d;">param</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">How man parameter definitions are defined in this combo</span>
<span style="color: #228b22;">size_t</span> <span style="color: #0000ff;">nParamsCombo</span>(<span style="color: #228b22;">Combo</span> <span style="color: #a0522d;">combo</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">a boolean of whether or not there are more product combos to come</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">used for terminating while loops</span>
<span style="color: #228b22;">bool</span> <span style="color: #0000ff;">hasNextCombo</span>(<span style="color: #228b22;">Combo</span> <span style="color: #a0522d;">combo</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">The next product combo as a malloc'd array of parameters of</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">nParamsCombo(combo) length</span>
<span style="color: #228b22;">Parameter</span> * <span style="color: #0000ff;">nextCombo</span>(<span style="color: #228b22;">Combo</span> <span style="color: #a0522d;">combo</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">Free a parameter list created by nextCombo</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">freeParamsCombo</span>(<span style="color: #228b22;">Combo</span> <span style="color: #a0522d;">combo</span>, <span style="color: #228b22;">Parameter</span> * <span style="color: #a0522d;">params</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">Free a cartesian product combo generator</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">freeCombo</span>(<span style="color: #228b22;">Combo</span> <span style="color: #a0522d;">combo</span>);
</pre>
</div>

<ul class="org-ul">
<li>w=3</li>
<li>z=2</li>
<li>coupling<sub>h</sub> = 1/(4*w + z)</li>
</ul>

<p>
parameter.h
</p>
<div class="org-src-container">
<pre class="src src-C"><span style="color: #b22222;">// </span><span style="color: #b22222;">Implement a guard</span>

<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;inttypes.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdbool.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdlib.h&gt;</span>

<span style="color: #a020f0;">enum</span> <span style="color: #228b22;">type_flag</span> {
  <span style="color: #a0522d;">LONG</span>,
  <span style="color: #a0522d;">DOUBLE</span>,
  <span style="color: #a0522d;">STRING</span>,
  <span style="color: #a0522d;">CHAR</span>,
};

<span style="color: #a020f0;">typedef</span> <span style="color: #a020f0;">enum</span> <span style="color: #228b22;">type_flag</span> <span style="color: #228b22;">TypeFlag</span>;

<span style="color: #a020f0;">union</span> <span style="color: #228b22;">any_t</span> {
  <span style="color: #228b22;">int64_t</span> <span style="color: #a0522d;">aLong</span>;
  <span style="color: #228b22;">double</span> <span style="color: #a0522d;">aDouble</span>;
  <span style="color: #228b22;">char</span> * <span style="color: #a0522d;">aString</span>;
  <span style="color: #228b22;">char</span> <span style="color: #a0522d;">aChar</span>;
};

<span style="color: #a020f0;">typedef</span> <span style="color: #a020f0;">union</span> <span style="color: #228b22;">any_t</span> <span style="color: #228b22;">Any</span>;

<span style="color: #a020f0;">struct</span> <span style="color: #228b22;">parameter_def</span> {
  <span style="color: #228b22;">char</span> * <span style="color: #a0522d;">name</span>;
  <span style="color: #228b22;">TypeFlag</span> <span style="color: #a0522d;">type</span>;
};

<span style="color: #a020f0;">typedef</span> <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">parameter_def</span> <span style="color: #228b22;">ParameterDef</span>;

<span style="color: #a020f0;">struct</span> <span style="color: #228b22;">parameter_t</span> {
  <span style="color: #228b22;">ParameterDef</span> <span style="color: #a0522d;">def</span>;
  <span style="color: #228b22;">Any</span> <span style="color: #a0522d;">any</span>;
};

<span style="color: #a020f0;">typedef</span> <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">parameter_t</span> <span style="color: #228b22;">Parameter</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">create a parameter def for aDouble</span>
<span style="color: #228b22;">ParameterDef</span> <span style="color: #0000ff;">doubleParameterDef</span>( <span style="color: #228b22;">char</span> * <span style="color: #a0522d;">name</span> );
<span style="color: #b22222;">// </span><span style="color: #b22222;">create a parameter def for aLong</span>
<span style="color: #228b22;">ParameterDef</span> <span style="color: #0000ff;">longParameterDef</span>(   <span style="color: #228b22;">char</span> * <span style="color: #a0522d;">name</span> );
<span style="color: #b22222;">// </span><span style="color: #b22222;">create a parameter def for aString</span>
<span style="color: #228b22;">ParameterDef</span> <span style="color: #0000ff;">stringParameterDef</span>( <span style="color: #228b22;">char</span> * <span style="color: #a0522d;">name</span> );
<span style="color: #b22222;">// </span><span style="color: #b22222;">create a parameter def for aChar</span>
<span style="color: #228b22;">ParameterDef</span> <span style="color: #0000ff;">charParameterDef</span>(   <span style="color: #228b22;">char</span> * <span style="color: #a0522d;">name</span> );
<span style="color: #b22222;">// </span><span style="color: #b22222;">create a parameter def for aChar</span>
<span style="color: #228b22;">ParameterDef</span> <span style="color: #0000ff;">mkParameterDef</span>(   <span style="color: #228b22;">char</span> * <span style="color: #a0522d;">name</span>, <span style="color: #228b22;">TypeFlag</span> <span style="color: #a0522d;">flag</span> );

<span style="color: #b22222;">// </span><span style="color: #b22222;">Are param1 and param2 equal?</span>
<span style="color: #228b22;">bool</span>         <span style="color: #0000ff;">equalParameterDef</span>(  <span style="color: #228b22;">ParameterDef</span> <span style="color: #a0522d;">param1</span>, <span style="color: #228b22;">ParameterDef</span> <span style="color: #a0522d;">param2</span>);

<span style="color: #b22222;">// </span><span style="color: #b22222;">create a double parameter </span>
<span style="color: #228b22;">Parameter</span>    <span style="color: #0000ff;">mkDoubleParameter</span>(  <span style="color: #228b22;">ParameterDef</span> <span style="color: #a0522d;">def</span>, <span style="color: #228b22;">double</span> <span style="color: #a0522d;">value</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">create a long parameter </span>
<span style="color: #228b22;">Parameter</span>    <span style="color: #0000ff;">mkLongParameter</span>(    <span style="color: #228b22;">ParameterDef</span> <span style="color: #a0522d;">def</span>, <span style="color: #228b22;">long</span>   <span style="color: #a0522d;">value</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">create a string parameter </span>
<span style="color: #228b22;">Parameter</span>    <span style="color: #0000ff;">mkStringParameter</span>(  <span style="color: #228b22;">ParameterDef</span> <span style="color: #a0522d;">def</span>, <span style="color: #228b22;">char</span> * <span style="color: #a0522d;">value</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">create a char parameter </span>
<span style="color: #228b22;">Parameter</span>    <span style="color: #0000ff;">mkCharParameter</span>(    <span style="color: #228b22;">ParameterDef</span> <span style="color: #a0522d;">def</span>, <span style="color: #228b22;">char</span>   <span style="color: #a0522d;">value</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">return the name of a parameter's def</span>
<span style="color: #228b22;">char</span> *       <span style="color: #0000ff;">nameParameter</span>(      <span style="color: #228b22;">Parameter</span> <span style="color: #a0522d;">param</span> );
<span style="color: #b22222;">// </span><span style="color: #b22222;">return the type of a parameter from its def</span>
<span style="color: #228b22;">TypeFlag</span>     <span style="color: #0000ff;">typeParameter</span>(      <span style="color: #228b22;">Parameter</span> <span style="color: #a0522d;">param</span> );
<span style="color: #b22222;">// </span><span style="color: #b22222;">return the double value of a parameter</span>
<span style="color: #228b22;">double</span>       <span style="color: #0000ff;">doubleParameter</span>(    <span style="color: #228b22;">Parameter</span> <span style="color: #a0522d;">param</span> );
<span style="color: #b22222;">// </span><span style="color: #b22222;">return the long value of a parameter</span>
<span style="color: #228b22;">long</span>         <span style="color: #0000ff;">longParameter</span>(      <span style="color: #228b22;">Parameter</span> <span style="color: #a0522d;">param</span> );
<span style="color: #b22222;">// </span><span style="color: #b22222;">return the string value of a parameter</span>
<span style="color: #228b22;">char</span> *       <span style="color: #0000ff;">stringParameter</span>(    <span style="color: #228b22;">Parameter</span> <span style="color: #a0522d;">param</span> );
<span style="color: #b22222;">// </span><span style="color: #b22222;">return the char value of a parameter</span>
<span style="color: #228b22;">char</span>         <span style="color: #0000ff;">charParameter</span>(      <span style="color: #228b22;">Parameter</span> <span style="color: #a0522d;">param</span> );
<span style="color: #b22222;">// </span><span style="color: #b22222;">Are param1 and param2 equal?</span>
<span style="color: #228b22;">bool</span>         <span style="color: #0000ff;">equalParameter</span>(     <span style="color: #228b22;">Parameter</span> <span style="color: #a0522d;">param1</span>, <span style="color: #228b22;">Parameter</span> <span style="color: #a0522d;">param2</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">Print parameters!</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">printParams</span>(<span style="color: #228b22;">Parameter</span> * <span style="color: #a0522d;">params</span>, <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">size</span>);
</pre>
</div>

<p>
3 includes 
</p>

<ul class="org-ul">
<li>w=3</li>
<li>z=0</li>
<li>coupling<sub>h</sub> = 1/(4*w + z)</li>
</ul>

<p>
ppdarray.h
</p>
<div class="org-src-container">
<pre class="src src-C"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"parameters.h"</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;inttypes.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdlib.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>

<span style="color: #b22222;">// </span><span style="color: #b22222;">You need a guard here!</span>

<span style="color: #b22222;">// </span><span style="color: #b22222;">forward declaration</span>
<span style="color: #a020f0;">union</span> <span style="color: #228b22;">ppd_t</span>;
<span style="color: #b22222;">// </span><span style="color: #b22222;">This is an array of defs, params, or arrays</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">Assume you keep the same sort of values within this array</span>
<span style="color: #a020f0;">struct</span> <span style="color: #228b22;">ppd_array</span> {
  <span style="color: #a020f0;">union</span> <span style="color: #228b22;">ppd_t</span> * <span style="color: #a0522d;">params</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">A pointer to an array of ppd_t unions (PPD)</span>
  <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">size</span>;
};
<span style="color: #a020f0;">typedef</span> <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">ppd_array</span> * <span style="color: #228b22;">PPDArray</span>;

<span style="color: #a020f0;">union</span> <span style="color: #228b22;">ppd_t</span> {
  <span style="color: #228b22;">ParameterDef</span>       <span style="color: #a0522d;">def</span>;
  <span style="color: #228b22;">Parameter</span>          <span style="color: #a0522d;">param</span>;
  <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">ppd_array</span> * <span style="color: #a0522d;">array</span>;
  <span style="color: #228b22;">int64_t</span>            <span style="color: #a0522d;">int64</span>;
  <span style="color: #228b22;">char</span>             * <span style="color: #a0522d;">str</span>;
};

<span style="color: #a020f0;">typedef</span> <span style="color: #a020f0;">union</span> <span style="color: #228b22;">ppd_t</span> <span style="color: #228b22;">PPD</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">create PPDArray</span>
<span style="color: #228b22;">PPDArray</span> <span style="color: #0000ff;">createPPDArray</span>();
<span style="color: #b22222;">// </span><span style="color: #b22222;">get the number of elements in a PPDArray</span>
<span style="color: #228b22;">size_t</span> <span style="color: #0000ff;">sizePPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">Free a PPD Array</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">freePPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">Free a PPD Array and all of its PPD Arrays (not recursive)</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">Frees an array of arrays, by freeing each contained array</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">freeArrayPPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">return a parameter def at index of PPDArray array</span>
<span style="color: #228b22;">ParameterDef</span> <span style="color: #0000ff;">parameterDefPPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">index</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">return a pointer to parameter def at index of PPDArray array</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">pretty unsafe</span>
<span style="color: #228b22;">ParameterDef</span> * <span style="color: #0000ff;">parameterDefRefPPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">index</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">return a parameter at index of PPDArray array</span>
<span style="color: #228b22;">Parameter</span> <span style="color: #0000ff;">parameterPPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">index</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">return a array at index of PPDArray array</span>
<span style="color: #228b22;">PPDArray</span> <span style="color: #0000ff;">arrayPPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">index</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">return an int64 at index of PPDArray array</span>
<span style="color: #228b22;">int64_t</span> <span style="color: #0000ff;">int64PPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">index</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">return a string at index of PPDArray array</span>
<span style="color: #228b22;">char</span> * <span style="color: #0000ff;">stringPPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">index</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">at index of array set the int64 value to </span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">setInt64PPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">index</span>, <span style="color: #228b22;">int64_t</span> <span style="color: #a0522d;">value</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">extend PPDArray 1 slot and put this PPD into that slot</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">may use realloc!</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">addPPDPPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">PPD</span> <span style="color: #a0522d;">defOrParam</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">extend PPDArray 1 slot and put this ParameterDef into that slot</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">may use realloc!</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">addDefPPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">ParameterDef</span> <span style="color: #a0522d;">def</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">extend PPDArray 1 slot and put this Parameter into that slot</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">may use realloc!</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">addParamPPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">Parameter</span> <span style="color: #a0522d;">param</span>);
<span style="color: #b22222;">// </span><span style="color: #b22222;">extend PPDArray 1 slot and put this Array newArray into that slot</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">may use realloc!</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">addPPDArrayPPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">newArray</span>  );
<span style="color: #b22222;">// </span><span style="color: #b22222;">extend PPDArray 1 slot and put this int64 into that slot</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">may use realloc!</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">addInt64PPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">int64_t</span> <span style="color: #a0522d;">int64</span>  );
<span style="color: #b22222;">// </span><span style="color: #b22222;">extend PPDArray 1 slot and put this string into that slot</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">may use realloc!</span>
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">addStringPPDArray</span>(<span style="color: #228b22;">PPDArray</span> <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">char</span> * <span style="color: #a0522d;">str</span> );
</pre>
</div>

<p>
3 includes &amp; 3 reference to int64<sub>t</sub>, Parameter and ParameterDef
</p>

<ul class="org-ul">
<li>w=3</li>
<li>z=3</li>
<li>coupling<sub>h</sub> = 1/(4*w + z)</li>
</ul>
</div>
</li>
</ol>
</li>
</ol>
</div>
</div>

<div id="outline-container-org5d42a70" class="outline-3">
<h3 id="org5d42a70"><span class="section-number-3">1.9</span> Cohesion</h3>
<div class="outline-text-3" id="text-1-9">
<p>
Cohesion is about how relevant code is to itself. A highly cohesive
module is topical, that is about it is about a single topic.
</p>

<p>
stdlib.h is low cohesion because it does too many things. From memory
allocation to random number generation stdlib.h does too much. It is
not cohesive.
</p>

<p>
math.h has better cohesion than stdlib.h but its cohesion is
considered low because the functions are just logically related to
math and floating point operations. In fact many of the operations
could be refactored and moved into floating point specific libraries.
</p>

<p>
parameters.h is very cohesive, it only deals with parameters and
parameter defs. Its responsibilities are the creation of parameters
and parameter defs. Its only weird responsibility is for printing
parameters which is probably its least cohesive part.
</p>

<p>
High cohesion is good because it means the module is topical and
relevant. It doesn't have any weird responsibilities. It won't have to
change to address extra responsibilities. High cohesion typically
limits coupling.
</p>

<p>
To calculate cohesion there's many metrics suggested but I suggest
reading the module and writing bullet points about responsibilities.
Let's look at ppdarray.c:
</p>
<ul class="org-ul">
<li>representation: structs for PPD array and containers</li>
<li>creation &amp; allocation</li>
<li>destruction &amp; deallocation</li>
<li>array access</li>
<li>array appending</li>
</ul>

<p>
So 5 responsibilities. Let's look at checkinput.h:
</p>
<ul class="org-ul">
<li>error detection</li>
<li>error reporting</li>
</ul>

<p>
Checkinput.h is clearly more cohesive than PPDArray mostly because it
has less responsibilities. Even though both are very cohesive modules
</p>

<p>
My stdio.h has 122 externs defined within it. It is way less cohesive
than PPDArray but all of stdio.h's externs are about io to terminals
and files. So it is still logically cohesive. 
</p>

<p>
My stdlib.h has 153 externs defined within it. But it handles memory
allocation, temporary files, environment variables, sorting, binary
search, converting floats to strings, etc. No cohesive and often
called coincidental cohesion (aka you're lucky if it is cohesive).
</p>
</div>

<div id="outline-container-orgb222758" class="outline-4">
<h4 id="orgb222758"><span class="section-number-4">1.9.1</span> McCabe's Cyclometic Complexity</h4>
<div class="outline-text-4" id="text-1-9-1">
<p>
McCabe's Cyclometic Complexity is [McCabe76] the number of unique
paths through a module. The idea is that a module is complicated
(complex) if there's lots of routes through the module.
</p>

<p>
Programmers worry about complicated code because it can become a
maintainability nightmare. It is hard to read and understand and can
have lots of corner cases making it very hard to test. This means it
is probably less reliable and trustable. Typically we correlate
complicated with the idea that it is not maintainable. 
</p>

<p>
You had to deal with McCabe's cyclometic complexity ever since we
forced OCLint on you.
</p>

<p>
Typically for a subroutine McCabes is calculated as (P=1):
</p>

<p>
MCC = E - N + 2P
MCC = E - N + 2
</p>

<p>
Where E is the number of edges in a module (directed edges) and N is
the number of nodes. 
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">input</span> = 0;
    scanf(<span style="color: #8b2252;">"%d"</span>, &amp;input);
    <span style="color: #a020f0;">return</span> 5 * input;
}
</pre>
</div>

<p>
This module has 3 nodes 2 edges and 1 exit:
</p>
<pre class="example">
int input = 0;
|
V
scanf("%d", &amp;input);
|
V
return 5 * input;
</pre>

<p>
MCC = 2 - 3 + 2 = 1
</p>

<p>
McCabes argued that subroutines or modules with complexity greater
than 10 should be split into smaller modules.
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;inttypes.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdlib.h&gt;</span>
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">sum</span>(<span style="color: #228b22;">int</span> * <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">n</span>) {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">sum</span> = 0;
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">i</span> = 0 ; i &lt; n ; i++ ) {
        sum += array[i];
    }
    <span style="color: #a020f0;">return</span> sum;
}
</pre>
</div>

<pre class="example">
int sum = 0;
|
V
for (size_t i = 0 ; i &lt; n ; i++ ) {//&lt;-+ // we could split this up
     |                                 |
     V                                 |
    sum += array[i]                    |
     |                                 |
     V                                 |
} // ----------------------------------+
|
V
return sum;
</pre>

<p>
E = 5
N = 5
MCC = E - N + 2 = 2
</p>

<p>
So that 1 for loop is worth 1
</p>


<p>
OK now let's do another sum that works but it more "complex".
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;inttypes.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdlib.h&gt;</span>
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">sum</span>(<span style="color: #228b22;">int</span> * <span style="color: #a0522d;">array</span>, <span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">n</span>) {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">sum</span> = 0; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">i</span> = 0 ; i &lt; n ; i+=4 ) { <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
        sum += array[i]; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
    } <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">i</span> = 1 ; i &lt; n ; i+=4 ) { <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
        sum += array[i]; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
    } <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">i</span> = 2 ; i &lt; n ; i+=4 ) { <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
        sum += array[i]; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
    } <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    <span style="color: #a020f0;">for</span> (<span style="color: #228b22;">size_t</span> <span style="color: #a0522d;">i</span> = 3 ; i &lt; n ; i+=4 ) { <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
        sum += array[i]; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
    } <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    <span style="color: #a020f0;">return</span> sum; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
}
</pre>
</div>
<p>
E=17
N=14
MCC=17-14+2 = 5
</p>

<p>
Effectively McCabes is close to the 1 + the number of branch points in
a program. So I could estimate the complexity of that program by
counting the number of if, while, do, for statements. This means I can
skip a lot of the complicated modelling and just count those.
</p>


<div class="org-src-container">
<pre class="src src-C"><span style="color: #228b22;">int</span> <span style="color: #0000ff;">passCode</span>(<span style="color: #228b22;">int</span> * <span style="color: #a0522d;">code</span>) {

    <span style="color: #a020f0;">if</span> ( code[0] == <span style="color: #8b2252;">'C'</span> ) { <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=2</span>
        <span style="color: #a020f0;">if</span> ( code[1] == <span style="color: #8b2252;">'R'</span> ) { <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=2</span>
            <span style="color: #a020f0;">if</span> ( code[2] == <span style="color: #8b2252;">'E'</span> ) { <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=2</span>
                <span style="color: #a020f0;">if</span> ( code[3] == <span style="color: #8b2252;">'D'</span> ) { <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=2</span>
                    <span style="color: #a020f0;">if</span> ( code[4] == <span style="color: #8b2252;">'I'</span> ) { <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=2</span>
                        <span style="color: #a020f0;">if</span> ( code[5] == <span style="color: #8b2252;">'T'</span> ) { <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=2</span>
                            <span style="color: #a020f0;">return</span> 1; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
                        }
                    }
                }
            }
        }
    }
    <span style="color: #a020f0;">return</span> 0; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
}
</pre>
</div>

<p>
E = 13
N = 8
MCC = 13 - 8 + 2 = 7
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #228b22;">int</span> <span style="color: #0000ff;">passCode</span>(<span style="color: #228b22;">int</span> * <span style="color: #a0522d;">code</span>) {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">sum</span> = 0; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    sum += code[0] == <span style="color: #8b2252;">'C'</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    sum += code[1] == <span style="color: #8b2252;">'R'</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    sum += code[2] == <span style="color: #8b2252;">'E'</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    sum += code[3] == <span style="color: #8b2252;">'D'</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    sum += code[4] == <span style="color: #8b2252;">'I'</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    sum += code[5] == <span style="color: #8b2252;">'T'</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    <span style="color: #a020f0;">return</span> sum==6; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
}
</pre>
</div>

<p>
MCC = 7 - 8 + 2 = 1
</p>

<div class="org-src-container">
<pre class="src src-C"><span style="color: #228b22;">int</span> <span style="color: #0000ff;">passCode</span>(<span style="color: #228b22;">int</span> * <span style="color: #a0522d;">code</span>) {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">sum</span> = 0; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1 E+=1</span>
    <span style="color: #a020f0;">if</span> (code[0] == <span style="color: #8b2252;">'C'</span>) sum++; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=2 E+=3</span>
    <span style="color: #b22222;">// </span><span style="color: #b22222;">it's E+3 because:</span>
    <span style="color: #b22222;">// </span><span style="color: #b22222;">the if statement condition is false is 1 path</span>
    <span style="color: #b22222;">// </span><span style="color: #b22222;">and you need 2 edges to, 1 to reach sum++ and 1 </span>
    <span style="color: #b22222;">// </span><span style="color: #b22222;">to exit the if statement</span>
    <span style="color: #a020f0;">if</span> (code[1] == <span style="color: #8b2252;">'R'</span>) sum++; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=2 E+=3</span>
    <span style="color: #a020f0;">if</span> (code[2] == <span style="color: #8b2252;">'E'</span>) sum++; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=2 E+=3</span>
    <span style="color: #a020f0;">if</span> (code[3] == <span style="color: #8b2252;">'D'</span>) sum++; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=2 E+=3</span>
    <span style="color: #a020f0;">if</span> (code[4] == <span style="color: #8b2252;">'I'</span>) sum++; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=2 E+=3</span>
    <span style="color: #a020f0;">if</span> (code[5] == <span style="color: #8b2252;">'T'</span>) sum++; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=2 E+=3</span>
    <span style="color: #a020f0;">return</span> sum==6; <span style="color: #b22222;">// </span><span style="color: #b22222;">N+=1</span>
}
</pre>
</div>

<p>
N = 14
E = 19
MCC = 19 - 14 + 2 = 7
</p>

<p>
If you want to use OCLint to print MCCabe's just force the threshold
</p>

<p>
Using the `-rc CYCLOMATIC<sub>COMPLEXITY</sub>=0` argument OCLint will print MCC
for all programs.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #a020f0;">for</span> file<span style="color: #a020f0;"> in</span> sum.c sum4.c passcodedeep.c passcodesum.c passcodeifsum.c
<span style="color: #a020f0;">do</span>
<span style="color: #483d8b;">echo</span> $<span style="color: #a0522d;">file</span>
/usr/local/bin/oclint --disable-rule=UselessParentheses <span style="color: #8b2252;">\</span>
   -rc <span style="color: #a0522d;">CYCLOMATIC_COMPLEXITY</span>=0  $<span style="color: #a0522d;">file</span> --  <span style="color: #8b2252;">\</span>
   -std=c99 -pedantic -Wall -Wextra -ftrapv -ggdb3  <span style="color: #8b2252;">\</span>
   -c $<span style="color: #a0522d;">file</span> 
<span style="color: #a020f0;">done</span>
<span style="color: #483d8b;">echo</span> good
</pre>
</div>

<pre class="example">
sum.c


OCLint Report

Summary: TotalFiles=1 FilesWithViolations=1 P1=0 P2=1 P3=1 

/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/sum.c:3:22: short variable name [naming|P3] Length of variable name `n` is 1, which is shorter than the threshold of 3
/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/sum.c:3:1: high cyclomatic complexity [size|P2] Cyclomatic Complexity Number 2 exceeds limit of 0

[OCLint (http://oclint.org) v0.15]
sum4.c


OCLint Report

Summary: TotalFiles=1 FilesWithViolations=1 P1=0 P2=1 P3=1 

/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/sum4.c:3:22: short variable name [naming|P3] Length of variable name `n` is 1, which is shorter than the threshold of 3
/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/sum4.c:3:1: high cyclomatic complexity [size|P2] Cyclomatic Complexity Number 5 exceeds limit of 0

[OCLint (http://oclint.org) v0.15]
passcodedeep.c


OCLint Report

Summary: TotalFiles=1 FilesWithViolations=1 P1=0 P2=1 P3=7 

/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/passcodedeep.c:1:26: deep nested block [size|P3] Block depth of 7 exceeds limit of 5
/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/passcodedeep.c:3:27: deep nested block [size|P3] Block depth of 6 exceeds limit of 5
/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/passcodedeep.c:3:5: collapsible if statements [basic|P3] 
/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/passcodedeep.c:4:9: collapsible if statements [basic|P3] 
/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/passcodedeep.c:5:13: collapsible if statements [basic|P3] 
/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/passcodedeep.c:6:17: collapsible if statements [basic|P3] 
/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/passcodedeep.c:7:21: collapsible if statements [basic|P3] 
/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/passcodedeep.c:1:1: high cyclomatic complexity [size|P2] Cyclomatic Complexity Number 7 exceeds limit of 0

[OCLint (http://oclint.org) v0.15]
passcodesum.c


OCLint Report

Summary: TotalFiles=1 FilesWithViolations=1 P1=0 P2=1 P3=0 

/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/passcodesum.c:1:1: high cyclomatic complexity [size|P2] Cyclomatic Complexity Number 1 exceeds limit of 0

[OCLint (http://oclint.org) v0.15]
passcodeifsum.c


OCLint Report

Summary: TotalFiles=1 FilesWithViolations=1 P1=0 P2=1 P3=0 

/home/hindle1/projects/CMPUT201W20/2020-01/CMPUT201W20B2-public/week12/passcodeifsum.c:1:1: high cyclomatic complexity [size|P2] Cyclomatic Complexity Number 7 exceeds limit of 0

[OCLint (http://oclint.org) v0.15]
good
</pre>
</div>

<ol class="org-ol">
<li><a id="orgda41c1e"></a>OCLint<br />
<div class="outline-text-5" id="text-1-9-1-1">
<p>
How does OCLint calculate Cyclometic complexity?
<a href="https://github.com/oclint/oclint/blob/master/oclint-rules/rules/size/CyclomaticComplexityRule.cpp">https://github.com/oclint/oclint/blob/master/oclint-rules/rules/size/CyclomaticComplexityRule.cpp</a>
<a href="https://github.com/oclint/oclint/blob/master/oclint-metrics/lib/CyclomaticComplexityMetric.cpp">https://github.com/oclint/oclint/blob/master/oclint-metrics/lib/CyclomaticComplexityMetric.cpp</a>
</p>

<p>
It traverses the code as a tree, and counts all conditions, whiles,
do, cases, fors, and if statements and adds 1.
</p>


<p>
oclint &#x2013;disable-rule=UselessParentheses -rc CYCLOMATIC<sub>COMPLEXITY</sub>=0 
</p>
</div>
</li>

<li><a id="org3d270b2"></a>Criticism of McCabe's<br />
<div class="outline-text-5" id="text-1-9-1-2">
<p>
McCabes is correlated with lines of code, so it is effectively a size
measure. We know that if each line has a probability of being buggy
then more lines implies more bugs. McCabes doesn't really help us
here. OClint has NCSS which is a lines of code measure.
</p>

<p>
McCabes ignores function pointers and dot operators. So dynamic code
is not counted. McCabes also ignores delegation functions (like a
function with a case statement) that you might call, effectively
making highly divergent code paths. 
</p>

<p>
McCabes typically ignores multi-module dependencies.
</p>

<p>
McCabes under counts paths through a program. The NPath metric can
count the paths.
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-orga0f69a0" class="outline-4">
<h4 id="orga0f69a0"><span class="section-number-4">1.9.2</span> Refs</h4>
<div class="outline-text-4" id="text-1-9-2">
<p>
[Stevens74] W. P. Stevens, G. J. Myers and L. L. Constantine, "Structured design,"
in IBM Systems Journal, vol. 13, no. 2, pp. 115-139, 1974.
<a href="https://ieeexplore.ieee.org/document/5388187">https://ieeexplore.ieee.org/document/5388187</a>
</p>

<p>
[Pressman09] Roger Pressman. 2009. Software Engineering: A Practitioner’s Approach
(7th. ed.). McGraw-Hill, Inc., USA.
</p>

<p>
[DHA95] Dhama, H., “Quantitative Models of Cohesion and Coupling in Software,”
Journal of Systems and Software, vol. 29, no. 4, April 1995.
</p>

<p>
[McCabe76] McCabe (December 1976). "A Complexity Measure". IEEE Transactions on
Software Engineering (4): 308–320. <a href="10.1109/tse.1976.233837">10.1109/tse.1976.233837</a>
</p>
</div>
</div>
</div>


<div id="outline-container-org538a79d" class="outline-3">
<h3 id="org538a79d"><span class="section-number-3">1.10</span> Big Programs</h3>
<div class="outline-text-3" id="text-1-10">
</div>
<div id="outline-container-orge47eeab" class="outline-4">
<h4 id="orge47eeab"><span class="section-number-4">1.10.1</span> DOOM</h4>
<div class="outline-text-4" id="text-1-10-1">
<pre class="example">
=================     ===============     ===============   ========  ========
\\ . . . . . . .\\   //. . . . . . .\\   //. . . . . . .\\  \\. . .\\// . . //
||. . ._____. . .|| ||. . ._____. . .|| ||. . ._____. . .|| || . . .\/ . . .||
|| . .||   ||. . || || . .||   ||. . || || . .||   ||. . || ||. . . . . . . ||
||. . ||   || . .|| ||. . ||   || . .|| ||. . ||   || . .|| || . | . . . . .||
|| . .||   ||. _-|| ||-_ .||   ||. . || || . .||   ||. _-|| ||-_.|\ . . . . ||
||. . ||   ||-'  || ||  `-||   || . .|| ||. . ||   ||-'  || ||  `|\_ . .|. .||
|| . _||   ||    || ||    ||   ||_ . || || . _||   ||    || ||   |\ `-_/| . ||
||_-' ||  .|/    || ||    \|.  || `-_|| ||_-' ||  .|/    || ||   | \  / |-_.||
||    ||_-'      || ||      `-_||    || ||    ||_-'      || ||   | \  / |  `||
||    `'         || ||         `'    || ||    `'         || ||   | \  / |   ||
||            .===' `===.         .==='.`===.         .===' /==. |  \/  |   ||
||         .=='   \_|-_ `===. .==='   _|_   `===. .===' _-|/   `==  \/  |   ||
||      .=='    _-'    `-_  `='    _-'   `-_    `='  _-'   `-_  /|  \/  |   ||
||   .=='    _-'          `-__\._-'         `-_./__-'         `' |. /|  |   ||
||.=='    _-'                                                     `' |  /==.||
=='    _-'                                                            \/   `==
\   _-'                                                                `-_   /
 `''                                                                      ``'
</pre>
</div>
</div>

<div id="outline-container-org264d649" class="outline-4">
<h4 id="org264d649"><span class="section-number-4">1.10.2</span> License</h4>
<div class="outline-text-4" id="text-1-10-2">
<p>
The license of code from doom is under the Doom License.
</p>

<p>
<a href="https://github.com/id-Software/DOOM/blob/master/linuxdoom-1.10/DOOMLIC.TXT">https://github.com/id-Software/DOOM/blob/master/linuxdoom-1.10/DOOMLIC.TXT</a>
</p>

<p>
This is not the GPL release :(
</p>
</div>
</div>

<div id="outline-container-org944ceae" class="outline-4">
<h4 id="org944ceae"><span class="section-number-4">1.10.3</span> Discussion</h4>
<div class="outline-text-4" id="text-1-10-3">
<p>
iD software 1995 game doom.
</p>

<p>
<a href="https://github.com/id-Software/DOOM/tree/master/linuxdoom-1.10">https://github.com/id-Software/DOOM/tree/master/linuxdoom-1.10</a>
</p>

<p>
General tips on code reading:
</p>

<ul class="org-ul">
<li>Go to the build system, how is the program built
<ul class="org-ul">
<li>What are the main entries to the program?</li>
<li>Start with the makefiles and similar build files</li>
<li><a href="https://github.com/id-Software/DOOM/blob/master/linuxdoom-1.10/Makefile">https://github.com/id-Software/DOOM/blob/master/linuxdoom-1.10/Makefile</a>
<ul class="org-ul">
<li><a href="file:///home/hindle1/src/DOOM/linuxdoom-1.10/Makefile">Makefile</a></li>
</ul></li>
<li><a href="https://github.com/id-Software/DOOM/blob/master/linuxdoom-1.10/i_main.c">https://github.com/id-Software/DOOM/blob/master/linuxdoom-1.10/i_main.c</a>
<ul class="org-ul">
<li><a href="file:///home/hindle1/src/DOOM/linuxdoom-1.10/i_main.c">i<sub>main.c</sub></a></li>
</ul></li>
</ul></li>
<li>.h files give an overview of what is important in each module
<ul class="org-ul">
<li><a href="https://github.com/id-Software/DOOM/blob/master/linuxdoom-1.10/d_main.h">https://github.com/id-Software/DOOM/blob/master/linuxdoom-1.10/d_main.h</a>
<ul class="org-ul">
<li><a href="file:///home/hindle1/src/DOOM/linuxdoom-1.10/d_main.h">d<sub>main.h</sub></a></li>
</ul></li>
<li><a href="https://github.com/id-Software/DOOM/blob/master/linuxdoom-1.10/d_main.c">https://github.com/id-Software/DOOM/blob/master/linuxdoom-1.10/d_main.c</a>
<ul class="org-ul">
<li><a href="file:///home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c">d<sub>main.c</sub></a></li>
</ul></li>
</ul></li>
<li>Read descriptions of functions and modules</li>
<li><p>
Use grep or other tools to search across the source code
</p>
<ul class="org-ul">
<li>E.g. let's look at blitting (rapid copying of data)</li>
</ul>
<div class="org-src-container">
<pre class="src src-sh">grep -i blit ~/src/DOOM/linuxdoom-1.10/*.h
grep -i blit ~/src/DOOM/linuxdoom-1.10/*.c
</pre>
</div>

<pre class="example">
/home/hindle1/src/DOOM/linuxdoom-1.10/doomstat.h:extern  boolean		noblit;
/home/hindle1/src/DOOM/linuxdoom-1.10/i_video.h:void I_UpdateNoBlit (void);
/home/hindle1/src/DOOM/linuxdoom-1.10/r_data.h:// Retrieve column data for span blitting.
/home/hindle1/src/DOOM/linuxdoom-1.10/r_draw.h:// The span blitting interface.
/home/hindle1/src/DOOM/linuxdoom-1.10/r_draw.h:// Span blitting for rows, floor/ceiling.
/home/hindle1/src/DOOM/linuxdoom-1.10/v_video.h://	Functions to blit a block to the screen.
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:    I_UpdateNoBlit ();
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:	I_FinishUpdate ();              // page flip or blit buffer
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:	I_UpdateNoBlit ();
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:	I_FinishUpdate ();                      // page flip or blit buffer
/home/hindle1/src/DOOM/linuxdoom-1.10/g_game.c:boolean         noblit;                 // for comparative timing purposes 
/home/hindle1/src/DOOM/linuxdoom-1.10/g_game.c:    noblit = M_CheckParm ("-noblit"); 
/home/hindle1/src/DOOM/linuxdoom-1.10/i_video.c:// I_UpdateNoBlit
/home/hindle1/src/DOOM/linuxdoom-1.10/i_video.c:void I_UpdateNoBlit (void)
/home/hindle1/src/DOOM/linuxdoom-1.10/i_video.c:    // scales the screen size before blitting it
/home/hindle1/src/DOOM/linuxdoom-1.10/m_menu.c:// but before it has been blitted.
/home/hindle1/src/DOOM/linuxdoom-1.10/v_video.c://	Functions to blit a block to the screen.
</pre></li>
<li><p>
Look at the file names! Sometimes they tell you a lot!
</p>

<p>
This doom source code is organized by prefixes. These indicate
grouping of modules.
</p>

<p>
From DoomWiki contributors, 1999, Doom source code, <a href="https://doomwiki.org/wiki/Doom_source_code">https://doomwiki.org/wiki/Doom_source_code</a>
</p>
<pre class="example">
AM_*
    Automap code
D_*
    Initialisation/general code
F_*
    "Finale" (end of game) and "screen melt" code.
G_*
    Main game loop/control
HU_*
    Heads-up display
I_*
    System-specific code
M_*
    Miscellaneous (includes the menu)
P_*
    Game logic/behaviour
R_*
    Rendering engine
S_*
    Sound code
ST_*
    Status bar
V_*
    General graphic rendering
WI_*
    End-of level "intermission" screen
W_*
    WAD file loading
Z_*
    Zone memory allocation system

The following are common prefixes for functions, although they do not denote a particular subsystem, and there are no files with these prefixes:

A_*
    Action functions invoked in sprite movement frames (these are the functions used in Dehacked "code pointers")
PIT_*
    Callback functions passed to P_BlockThingsIterator (see p_maputl.c)
T_*
    "Thinker" functions set to be called each clock tic for some purpose (eg, moving platforms or flickering lights)
</pre></li>

<li><p>
Memory allocation is always interesting in a C program
</p>

<div class="org-src-container">
<pre class="src src-sh">grep malloc ~/src/DOOM/linuxdoom-1.10/*.h
grep malloc ~/src/DOOM/linuxdoom-1.10/*.c
</pre>
</div>

<pre class="example">
/home/hindle1/src/DOOM/linuxdoom-1.10/i_system.h:// to get the ammount of memory to malloc
/home/hindle1/src/DOOM/linuxdoom-1.10/i_system.h:// just mallocs under unix
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:    newfile = malloc (strlen(file)+1);
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:    doom2wad = malloc(strlen(doomwaddir)+1+9+1);
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:    doomuwad = malloc(strlen(doomwaddir)+1+8+1);
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:    doomwad = malloc(strlen(doomwaddir)+1+8+1);
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:    doom1wad = malloc(strlen(doomwaddir)+1+9+1);
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:    // Insufficient malloc, caused spurious realloc errors.
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:    plutoniawad = malloc(strlen(doomwaddir)+1+/*9*/12+1);
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:    tntwad = malloc(strlen(doomwaddir)+1+9+1);
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:    doom2fwad = malloc(strlen(doomwaddir)+1+10+1);
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:	    file = malloc (size);
/home/hindle1/src/DOOM/linuxdoom-1.10/d_main.c:	    myargv = malloc(sizeof(char *)*MAXARGVS);
/home/hindle1/src/DOOM/linuxdoom-1.10/i_net.c:    doomcom = malloc (sizeof (*doomcom) );
/home/hindle1/src/DOOM/linuxdoom-1.10/i_system.c:    return (byte *) malloc (*size);
/home/hindle1/src/DOOM/linuxdoom-1.10/i_system.c:    mem = (byte *)malloc (length);
/home/hindle1/src/DOOM/linuxdoom-1.10/i_video.c:    				(char*)malloc(X_width * X_height),
/home/hindle1/src/DOOM/linuxdoom-1.10/i_video.c:	screens[0] = (unsigned char *) malloc (SCREENWIDTH * SCREENHEIGHT);
/home/hindle1/src/DOOM/linuxdoom-1.10/m_misc.c:		    newstring = (char *) malloc(len);
/home/hindle1/src/DOOM/linuxdoom-1.10/w_wad.c:#include &lt;malloc.h&gt;
/home/hindle1/src/DOOM/linuxdoom-1.10/w_wad.c:    lumpinfo = malloc(1);	
/home/hindle1/src/DOOM/linuxdoom-1.10/w_wad.c:    lumpcache = malloc (size);
/home/hindle1/src/DOOM/linuxdoom-1.10/z_zone.c:    // total bytes malloced, including header
</pre>

<p>
Turns out they pool allocate at the start and do their own memory management.
So they don't plan to call upon malloc very much after this point.
</p>

<div class="org-src-container">
<pre class="src src-sh">grep I_ZoneBase ~/src/DOOM/linuxdoom-1.10/*.h
grep I_ZoneBase ~/src/DOOM/linuxdoom-1.10/*.c
</pre>
</div>

<pre class="example">
/home/hindle1/src/DOOM/linuxdoom-1.10/i_system.h:byte*	I_ZoneBase (int *size);
/home/hindle1/src/DOOM/linuxdoom-1.10/i_system.c:byte* I_ZoneBase (int*	size)
/home/hindle1/src/DOOM/linuxdoom-1.10/z_zone.c:    mainzone = (memzone_t *)I_ZoneBase (&amp;size);
</pre></li>
</ul>



<ul class="org-ul">
<li><a href="file:///home/hindle1/src/DOOM/">~/src/DOOM/</a></li>
<li><a href="file:///home/hindle1/src/DOOM/linuxdoom-1.10/Makefile">~/src/DOOM/linuxdoom-1.10/Makefile</a></li>
<li><a href="file:///home/hindle1/src/DOOM/linuxdoom-1.10/i_main.c">~/src/DOOM/linuxdoom-1.10/i<sub>main.c</sub></a></li>
<li><a href="file:///home/hindle1/src/DOOM/linuxdoom-1.10/d_main.h">~/src/DOOM/linuxdoom-1.10/d<sub>main.h</sub></a></li>
</ul>
</div>
</div>

<div id="outline-container-orgcd4b5d5" class="outline-4">
<h4 id="orgcd4b5d5"><span class="section-number-4">1.10.4</span> Refs</h4>
<div class="outline-text-4" id="text-1-10-4">
<ul class="org-ul">
<li>DoomWiki contributors, 1999, Doom source code, <a href="https://doomwiki.org/wiki/Doom_source_code">https://doomwiki.org/wiki/Doom_source_code</a></li>
<li>DoomWiki contributors, 1999, Doom source code files, <a href="https://doomwiki.org/wiki/Doom_source_code_files">https://doomwiki.org/wiki/Doom_source_code_files</a></li>
<li>iD Software, 1997, Doom Source Code <a href="https://github.com/id-Software/DOOM/">https://github.com/id-Software/DOOM/</a></li>
<li>Fabien Sanglard, 2010, <a href="http://fabiensanglard.net/doomIphone/doomClassicRenderer.php">http://fabiensanglard.net/doomIphone/doomClassicRenderer.php</a>
<ul class="org-ul">
<li>All about the engine itself</li>
</ul></li>
<li>Tom Hall, John Romero, 2011, Doom Postmortem
<a href="https://www.gdcvault.com/play/1014627/Classic-Game-Postmortem">https://www.gdcvault.com/play/1014627/Classic-Game-Postmortem</a>
<ul class="org-ul">
<li>Developers discuss doom</li>
</ul></li>
<li>John Romero, 1993, A visit to iD Software, 
<a href="https://www.youtube.com/watch?v=Q65xJfVkiaI">https://www.youtube.com/watch?v=Q65xJfVkiaI</a></li>
<li>Kris Occhipinti, 2015, Doom Source Code Editing Prboom GCC Linux Tutorial
<a href="https://www.youtube.com/watch?v=Cd8T5-j1QwQ">https://www.youtube.com/watch?v=Cd8T5-j1QwQ</a>
<a href="https://pastebin.com/T29s9Mss">https://pastebin.com/T29s9Mss</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Abram Hindle</p>
<p class="date">Created: 2020-04-02 Thu 11:32</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
